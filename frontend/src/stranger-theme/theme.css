/* ============================================
   STRANGER THINGS CINEMATIC THEME SYSTEM
   ============================================
   Modular CSS for Hawkins ↔ Upside Down themes
   GPU-accelerated, performance-optimized
   ============================================ */

/* DISABLE ALL ANIMATIONS */
*,
*::before,
*::after {
  animation: none !important;
  animation-duration: 0s !important;
  animation-delay: 0s !important;
  animation-iteration-count: 1 !important;
  transition: none !important;
  transition-duration: 0s !important;
  transition-delay: 0s !important;
}

/* Prevent any shaking or movement */
body,
html {
  transform: translate3d(0, 0, 0) !important;
  animation: none !important;
}

body.camera-shake,
body.frame-jitter,
body.rgb-shift,
html.camera-shake,
html.frame-jitter,
html.rgb-shift {
  transform: translate3d(0, 0, 0) !important;
  animation: none !important;
}

:root {
  /* HAWKINS THEME - Warm Vintage Palette */
  --hawkins-bg: #F5F1E8;
  --hawkins-surface: #E8E0D0;
  --hawkins-card: #F9F6F0;
  --hawkins-border: #D4C4B0;
  --hawkins-text: #3A2E1F;
  --hawkins-text-secondary: #6B5D4A;
  --hawkins-accent: #8B4513;
  --hawkins-blue: #4A6FA5;
  --hawkins-red: #B85C57;
  
  /* UPSIDE DOWN THEME - Abyss Horror */
  --upside-bg: #050508;
  --upside-surface: #131316;
  --upside-card: #1A1A1D;
  --upside-border: #2A2A2C;
  --upside-text: #E4E4E4;
  --upside-text-secondary: #A0A0A0;
  --upside-red: #E50914;
  --upside-blood: #B1060F;
  --upside-blue: #3A8DFF;
  --upside-purple: #6E1FFF;
  --upside-grey: #2A2A2C;
  
  /* Animation Durations */
  --transition-fast: 200ms;
  --transition-normal: 300ms;
  --transition-slow: 600ms;
  --transition-cinematic: 1000ms;
  
  /* Performance Flags */
  --particle-count: 50;
  --fog-layers: 3;
  --glitch-intensity: 0.3;
}

/* ============================================
   BASE THEME SYSTEM
   ============================================ */

body {
  transition: background-color var(--transition-cinematic) ease-in-out,
              color var(--transition-cinematic) ease-in-out;
  position: relative;
  overflow-x: hidden;
}

/* Upside Down Theme - Always Active */
body,
body.theme-upside-down {
  background: var(--upside-bg);
  color: var(--upside-text);
  position: relative;
  overflow-x: hidden;
}

/* Continuous subtle background pulse - DISABLED */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle at 50% 50%, rgba(229, 9, 20, 0.03) 0%, transparent 70%);
  z-index: -6;
  pointer-events: none;
  animation: none !important;
  opacity: 0.3 !important;
  transform: scale(1) !important;
}

@keyframes background-pulse {
  0%, 100% {
    opacity: 0.3 !important;
    transform: scale(1) !important;
  }
}

/* ============================================
   CINEMATIC TRANSITION - DIMENSIONAL TEAR
   ============================================ */

.dimensional-tear {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 10000;
  overflow: hidden;
}

.dimensional-tear::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: radial-gradient(circle, var(--upside-red) 0%, transparent 70%);
  transform: translate(-50%, -50%);
  animation: tear-expand 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  opacity: 0.8;
}

.dimensional-tear::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--upside-bg);
  clip-path: polygon(0% 0%, 0% 0%, 0% 0%, 0% 0%);
  animation: tear-clip 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes tear-expand {
  0% {
    width: 0;
    height: 0;
    opacity: 0;
  }
  50% {
    opacity: 0.9;
  }
  100% {
    width: 200vmax;
    height: 200vmax;
    opacity: 0;
  }
}

@keyframes tear-clip {
  0% {
    clip-path: polygon(0% 0%, 0% 0%, 0% 0%, 0% 0%);
  }
  100% {
    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
  }
}

/* Reverse Tear (Upside Down → Hawkins) */
.dimensional-tear.reverse::before {
  animation: tear-contract 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.dimensional-tear.reverse::after {
  animation: tear-clip-reverse 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes tear-contract {
  0% {
    width: 200vmax;
    height: 200vmax;
    opacity: 0;
  }
  50% {
    opacity: 0.9;
  }
  100% {
    width: 0;
    height: 0;
    opacity: 0;
  }
}

@keyframes tear-clip-reverse {
  0% {
    clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
  }
  100% {
    clip-path: polygon(0% 0%, 0% 0%, 0% 0%, 0% 0%);
  }
}

/* Shockwave Effect */
.shockwave {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  border: 2px solid var(--upside-red);
  transform: translate(-50%, -50%);
  animation: shockwave-pulse 0.6s ease-out forwards;
  pointer-events: none;
  z-index: 10001;
}

@keyframes shockwave-pulse {
  0% {
    width: 0;
    height: 0;
    opacity: 1;
  }
  100% {
    width: 300vmax;
    height: 300vmax;
    opacity: 0;
  }
}

/* Camera Shake - DISABLED */
@keyframes camera-shake {
  0%, 100% { transform: translate3d(0, 0, 0) !important; }
}

.camera-shake,
body.camera-shake,
html.camera-shake {
  animation: none !important;
  transform: translate3d(0, 0, 0) !important;
}

/* ============================================
   ATMOSPHERIC LAYERS - UPSIDE DOWN
   ============================================ */

/* Layer 1: Abyss Background - animations disabled */
.abyss-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -5;
  background: 
    radial-gradient(circle at 20% 30%, rgba(58, 141, 255, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(110, 31, 255, 0.12) 0%, transparent 50%),
    radial-gradient(circle at 50% 50%, rgba(229, 9, 20, 0.05) 0%, transparent 60%),
    linear-gradient(180deg, #050508 0%, #0A0A0D 50%, #050508 100%);
  animation: none !important;
  opacity: 1 !important;
  filter: brightness(0.85) !important;
  will-change: auto;
}

@keyframes abyss-pulse {
  0%, 100% {
    opacity: 1 !important;
    filter: brightness(0.85) !important;
  }
}

/* Layer 2: Crawling Veins - COMPLETELY DISABLED */
.veins-layer,
#veins-layer,
.vein,
svg[class*="vein"],
svg path.vein {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  position: fixed !important;
  top: -9999px !important;
  left: -9999px !important;
  width: 0 !important;
  height: 0 !important;
  z-index: -9999 !important;
  pointer-events: none !important;
  transform: none !important;
  stroke: transparent !important;
  fill: none !important;
}

.vein {
  position: absolute;
  stroke: var(--upside-red);
  stroke-width: 3;
  fill: none;
  filter: drop-shadow(0 0 8px var(--upside-red)) drop-shadow(0 0 16px var(--upside-red));
  stroke-dasharray: 1000;
  stroke-dashoffset: 1000;
  animation: vein-crawl 6s ease-in-out infinite, vein-pulse 1.5s ease-in-out infinite;
}

@keyframes vein-crawl {
  0% {
    stroke-dashoffset: 1000;
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    stroke-dashoffset: 0;
    opacity: 0.8;
  }
}

@keyframes vein-pulse {
  0%, 100% {
    filter: drop-shadow(0 0 8px var(--upside-red)) drop-shadow(0 0 16px var(--upside-red));
    opacity: 0.7;
    stroke-width: 3;
  }
  50% {
    filter: drop-shadow(0 0 16px var(--upside-red)) drop-shadow(0 0 32px var(--upside-red));
    opacity: 1;
    stroke-width: 4;
  }
}

/* Layer 3: Fog / Mist */
.fog-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -2;
  pointer-events: none;
  will-change: transform;
}

.fog-1 {
  background: radial-gradient(circle at 30% 40%, rgba(58, 141, 255, 0.25) 0%, transparent 60%);
  animation: fog-drift-1 15s ease-in-out infinite;
  mix-blend-mode: screen;
  opacity: 0.8;
}

.fog-2 {
  background: radial-gradient(circle at 70% 60%, rgba(110, 31, 255, 0.2) 0%, transparent 50%);
  animation: fog-drift-2 20s ease-in-out infinite;
  mix-blend-mode: overlay;
  opacity: 0.7;
}

.fog-3 {
  background: radial-gradient(circle at 50% 50%, rgba(229, 9, 20, 0.15) 0%, transparent 70%);
  animation: fog-drift-3 25s ease-in-out infinite;
  mix-blend-mode: screen;
  opacity: 0.6;
}

@keyframes fog-drift-1 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(20px, -30px) scale(1.1); }
  66% { transform: translate(-15px, 20px) scale(0.9); }
}

@keyframes fog-drift-2 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  50% { transform: translate(-25px, 15px) scale(1.15); }
}

@keyframes fog-drift-3 {
  0%, 100% { transform: translate(0, 0) scale(1); }
  25% { transform: translate(15px, 25px) scale(0.95); }
  75% { transform: translate(-20px, -15px) scale(1.05); }
}

/* Layer 4: Spores / Particles - DISABLED */
.spores-container,
#spores-container {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  position: fixed;
  top: -9999px;
  left: -9999px;
  width: 0;
  height: 0;
  z-index: -9999;
  pointer-events: none;
  overflow: hidden;
}

.spore,
.ash-flake,
.ash-ember {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  width: 0 !important;
  height: 0 !important;
  position: absolute;
  top: -9999px;
  left: -9999px;
  animation: none !important;
}

@keyframes spore-flicker {
  0%, 100% {
    opacity: 0.6;
    box-shadow: 0 0 10px var(--upside-blue), 0 0 20px var(--upside-blue);
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 15px var(--upside-blue), 0 0 30px var(--upside-blue);
  }
}

/* Layer 5: Ash / Snowfall - DISABLED */
.ash-container,
#ash-container {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  position: fixed;
  top: -9999px;
  left: -9999px;
  width: 0;
  height: 0;
  z-index: -9999;
  pointer-events: none;
  overflow: hidden;
}

.ash-flake {
  position: absolute;
  background: rgba(229, 9, 20, 0.4);
  border-radius: 50%;
  box-shadow: 0 0 4px rgba(229, 9, 20, 0.6);
  will-change: transform, opacity;
}

.ash-ember {
  position: absolute;
  width: 3px;
  height: 3px;
  background: var(--upside-red);
  border-radius: 50%;
  box-shadow: 0 0 12px var(--upside-red), 0 0 24px var(--upside-red);
  opacity: 0.9;
  will-change: transform, opacity;
  animation: ember-flicker 1.5s ease-in-out infinite;
}

@keyframes ember-flicker {
  0%, 100% {
    opacity: 0.7;
    box-shadow: 0 0 12px var(--upside-red), 0 0 24px var(--upside-red);
  }
  50% {
    opacity: 1;
    box-shadow: 0 0 18px var(--upside-red), 0 0 36px var(--upside-red);
  }
}

/* ============================================
   VHS / GLITCH SYSTEM
   ============================================ */

.vhs-glitch {
  position: relative;
}

.vhs-glitch::before,
.vhs-glitch::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: inherit;
  clip-path: inset(0 0 0 0);
}

.vhs-glitch::before {
  left: -2px;
  text-shadow: 2px 0 var(--upside-red);
  clip-path: inset(0 0 0 0);
  animation: glitch-1 0.25s infinite;
  mix-blend-mode: screen;
}

.vhs-glitch::after {
  left: 2px;
  text-shadow: -2px 0 var(--upside-blue);
  clip-path: inset(0 0 0 0);
  animation: glitch-2 0.25s infinite;
  mix-blend-mode: screen;
}

@keyframes glitch-1 {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(-2px, 2px); }
  40% { transform: translate(-2px, -2px); }
  60% { transform: translate(2px, 2px); }
  80% { transform: translate(2px, -2px); }
}

@keyframes glitch-2 {
  0%, 100% { transform: translate(0); }
  20% { transform: translate(2px, 2px); }
  40% { transform: translate(2px, -2px); }
  60% { transform: translate(-2px, 2px); }
  80% { transform: translate(-2px, -2px); }
}

/* RGB Channel Shift */
.rgb-shift {
  position: relative;
}

.rgb-shift::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: inherit;
  mix-blend-mode: screen;
  animation: rgb-shift-x 0.1s infinite;
  pointer-events: none;
}

@keyframes rgb-shift-x {
  0% { transform: translateX(0); }
  50% { transform: translateX(2px); }
  100% { transform: translateX(0); }
}

/* Scanlines - DISABLED */
.scanlines {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
  width: 0 !important;
  height: 0 !important;
  position: absolute !important;
  left: -9999px !important;
  top: -9999px !important;
  z-index: -9999 !important;
  background: none !important;
  background-image: none !important;
}

@keyframes scanline-drift {
  0%, 100% { transform: translateY(0) !important; }
}

/* Horizontal Tearing */
.horizontal-tear {
  position: relative;
  overflow: hidden;
}

.horizontal-tear::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 2px;
  background: var(--upside-red);
  box-shadow: 0 0 10px var(--upside-red);
  animation: tear-sweep 3s infinite;
}

@keyframes tear-sweep {
  0% { left: -100%; opacity: 0; }
  50% { opacity: 1; }
  100% { left: 100%; opacity: 0; }
}

/* Frame Jitter - DISABLED */
.frame-jitter,
body.frame-jitter,
html.frame-jitter {
  animation: none !important;
  transform: translateY(0) !important;
}

@keyframes jitter {
  0%, 100% { transform: translateY(0) !important; }
}

/* ============================================
   INTERACTIVE REACTIONS
   ============================================ */

/* Cursor flashlight COMPLETELY DISABLED */
#cursor-flashlight,
.cursor-flashlight,
[id*="cursor-flashlight"],
[class*="cursor-flashlight"],
[id*="flashlight"],
[class*="flashlight"],
*[id*="flashlight"],
*[class*="flashlight"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
  width: 0 !important;
  height: 0 !important;
  max-width: 0 !important;
  max-height: 0 !important;
  position: absolute !important;
  left: -9999px !important;
  top: -9999px !important;
  z-index: -9999 !important;
  background: none !important;
  background-image: none !important;
  transform: scale(0) !important;
  overflow: hidden !important;
}

/* Remove any radial gradient overlays that follow cursor */
div[style*="radial-gradient"][style*="cursor"],
div[style*="--cursor-x"],
div[style*="--cursor-y"],
*[style*="radial-gradient"][style*="cursor"],
*[style*="--cursor-x"],
*[style*="--cursor-y"] {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  background: none !important;
  background-image: none !important;
}

/* Disable any element with cursor-following radial gradient */
div[style*="radial-gradient"]:has([style*="cursor"]),
div:has([style*="--cursor-x"]),
div:has([style*="--cursor-y"]) {
  display: none !important;
}

/* Heartbeat Pulse */
@keyframes heartbeat {
  0%, 100% {
    transform: scale(1);
    filter: brightness(1);
  }
  10% {
    transform: scale(1.03);
    filter: brightness(1.2);
  }
  20% {
    transform: scale(1);
    filter: brightness(1);
  }
}

.heartbeat-pulse {
  animation: heartbeat 1s ease-in-out infinite;
}

/* Global heartbeat effect on body */
body.heartbeat-pulse {
  animation: heartbeat-body 1s ease-in-out;
}

@keyframes heartbeat-body {
  0%, 100% {
    filter: brightness(1);
  }
  10% {
    filter: brightness(1.05);
  }
  20% {
    filter: brightness(1);
  }
}

/* ============================================
   HORROR ANIMATIONS
   ============================================ */

/* Demogorgon Popup */
.demogorgon-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 20000;
  pointer-events: none;
  display: flex;
  align-items: center;
  justify-content: center;
}

.demogorgon-popup {
  width: 400px;
  height: 400px;
  background: url('assets/demogorgon-sprite.svg') center/contain no-repeat;
  opacity: 0;
  transform: scale(0.5) translateY(100px);
  animation: demogorgon-appear 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes demogorgon-appear {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(100px);
  }
  50% {
    opacity: 1;
    transform: scale(1.1) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.screen-flash {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--upside-red);
  opacity: 0;
  z-index: 20001;
  pointer-events: none;
  animation: flash 0.1s ease-out;
}

@keyframes flash {
  0% { opacity: 0; }
  50% { opacity: 0.9; }
  100% { opacity: 0; }
}

/* Vecna Curse - Floating Body */
.vecna-curse {
  position: relative;
  transform-style: preserve-3d;
  animation: vecna-float 3s ease-in-out infinite;
}

.vecna-curse::before {
  content: '';
  position: absolute;
  top: -10px;
  left: -10px;
  right: -10px;
  bottom: -10px;
  border: 2px solid var(--upside-red);
  border-radius: 8px;
  box-shadow: 
    0 0 20px var(--upside-red),
    inset 0 0 20px rgba(229, 9, 20, 0.3);
  animation: vecna-pulse 1.5s ease-in-out infinite;
  pointer-events: none;
}

@keyframes vecna-float {
  0%, 100% {
    transform: translateY(0) rotateX(0deg) rotateY(0deg);
  }
  25% {
    transform: translateY(-10px) rotateX(2deg) rotateY(-1deg);
  }
  50% {
    transform: translateY(-15px) rotateX(0deg) rotateY(1deg);
  }
  75% {
    transform: translateY(-10px) rotateX(-2deg) rotateY(-1deg);
  }
}

@keyframes vecna-pulse {
  0%, 100% {
    opacity: 0.6;
    box-shadow: 
      0 0 20px var(--upside-red),
      inset 0 0 20px rgba(229, 9, 20, 0.3);
  }
  50% {
    opacity: 1;
    box-shadow: 
      0 0 40px var(--upside-red),
      inset 0 0 30px rgba(229, 9, 20, 0.5);
  }
}

/* Mind Flayer Shadow */
.mind-flayer-shadow {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  pointer-events: none;
  background: radial-gradient(
    ellipse at var(--shadow-x, 50%) var(--shadow-y, 50%),
    transparent 0%,
    rgba(0, 0, 0, 0.6) 50%,
    rgba(0, 0, 0, 0.9) 100%
  );
  mask: url('assets/mind-flayer-mask.svg');
  mask-size: cover;
  animation: shadow-crawl 20s ease-in-out infinite;
}

@keyframes shadow-crawl {
  0%, 100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.3;
  }
  25% {
    transform: translate(50px, -30px) scale(1.1);
    opacity: 0.5;
  }
  50% {
    transform: translate(-30px, 50px) scale(0.9);
    opacity: 0.4;
  }
  75% {
    transform: translate(30px, 30px) scale(1.05);
    opacity: 0.6;
  }
}

/* ============================================
   UI COMPONENT TRANSFORMATIONS
   ============================================ */

/* Hero Title */
.hero-title {
  font-family: 'Cinzel', serif;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

body.theme-hawkins .hero-title {
  color: var(--hawkins-accent);
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
}

body.theme-upside-down .hero-title {
  color: var(--upside-red);
  text-shadow: 
    0 0 10px var(--upside-red),
    0 0 20px var(--upside-red),
    0 0 30px var(--upside-red);
  animation: title-pulse 2s ease-in-out infinite;
}

@keyframes title-pulse {
  0%, 100% {
    text-shadow: 
      0 0 10px var(--upside-red),
      0 0 20px var(--upside-red),
      0 0 30px var(--upside-red);
  }
  50% {
    text-shadow: 
      0 0 20px var(--upside-red),
      0 0 40px var(--upside-red),
      0 0 60px var(--upside-red);
  }
}

/* Buttons */
.btn-hawkins {
  background: var(--hawkins-blue);
  color: white;
  border: 2px solid var(--hawkins-border);
  border-radius: 4px;
  padding: 0.75rem 1.5rem;
  font-weight: 600;
  transition: all var(--transition-normal);
}

.btn-hawkins:hover {
  background: var(--hawkins-red);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.btn-upside-down {
  background: var(--upside-red);
  color: white;
  border: 2px solid var(--upside-red);
  border-radius: 4px;
  padding: 0.75rem 1.5rem;
  font-weight: 600;
  box-shadow: 0 0 10px var(--upside-red);
  transition: all var(--transition-normal);
  position: relative;
  overflow: hidden;
}

.btn-upside-down::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transition: left 0.5s;
}

.btn-upside-down:hover {
  box-shadow: 0 0 20px var(--upside-red), 0 0 40px var(--upside-red);
  transform: scale(1.05);
  animation: btn-flicker 0.3s ease-in-out;
}

.btn-upside-down:hover::before {
  left: 100%;
}

@keyframes btn-flicker {
  0%, 100% { filter: brightness(1); }
  50% { filter: brightness(1.3); }
}

/* Cards */
.card-hawkins {
  background: var(--hawkins-card);
  border: 1px solid var(--hawkins-border);
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.card-upside-down {
  background: var(--upside-surface);
  border: 1px solid var(--upside-border);
  border-radius: 8px;
  padding: 1.5rem;
  position: relative;
  box-shadow: 
    0 0 10px rgba(229, 9, 20, 0.2),
    inset 0 0 20px rgba(0, 0, 0, 0.3);
}

.card-upside-down::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: 8px;
  padding: 2px;
  background: linear-gradient(45deg, var(--upside-red), var(--upside-blue), var(--upside-purple));
  -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  animation: card-vein-grow 3s ease-in-out infinite;
}

@keyframes card-vein-grow {
  0%, 100% { opacity: 0; }
  50% { opacity: 0.6; }
}

/* Inputs */
input:focus {
  outline: none;
}

body.theme-hawkins input:focus {
  border-color: var(--hawkins-blue);
  box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
}

body.theme-upside-down input:focus {
  border-color: var(--upside-red);
  box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.3), 0 0 10px var(--upside-red);
}

/* ============================================
   PERFORMANCE & ACCESSIBILITY
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .spores-container,
  .ash-container,
  .fog-layer,
  .veins-layer {
    display: none !important;
  }
}

@media (prefers-reduced-transparency: reduce) {
  .fog-layer,
  .veins-layer {
    opacity: 0.1 !important;
  }
}

/* Low Performance Mode */
.performance-low {
  --particle-count: 10;
  --fog-layers: 1;
}

.performance-low .spores-container,
.performance-low .ash-container {
  display: none;
}

.performance-low .fog-layer:nth-child(n+2) {
  display: none;
}

/* ============================================
   SEASON 4 INTRO SEQUENCE
   ============================================ */

.season4-intro {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 30000;
  background: var(--upside-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
}

.season4-intro.active {
  opacity: 1;
  pointer-events: all;
  animation: intro-fade-in 0.5s ease-in forwards;
}

@keyframes intro-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.intro-content {
  text-align: center;
  color: var(--upside-text);
}

.intro-title {
  font-family: 'Cinzel', serif;
  font-size: 4rem;
  letter-spacing: 0.2em;
  color: var(--upside-red);
  text-shadow: 
    0 0 20px var(--upside-red),
    0 0 40px var(--upside-red);
  animation: intro-title-reveal 2s ease-out forwards;
  opacity: 0;
}

@keyframes intro-title-reveal {
  0% {
    opacity: 0;
    transform: scale(0.5) translateY(50px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.skip-intro-btn {
  position: absolute;
  bottom: 2rem;
  right: 2rem;
  padding: 0.75rem 1.5rem;
  background: rgba(229, 9, 20, 0.3);
  border: 1px solid var(--upside-red);
  color: var(--upside-text);
  cursor: pointer;
  border-radius: 4px;
  transition: all var(--transition-normal);
}

.skip-intro-btn:hover {
  background: var(--upside-red);
  box-shadow: 0 0 10px var(--upside-red);
}
